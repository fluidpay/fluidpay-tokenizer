"use strict";(self["webpackChunkfluidpay_tokenizer"]=self["webpackChunkfluidpay_tokenizer"]||[]).push([[561],{507:function(e,t,i){i.d(t,{K:function(){return n}});const n="pub_0wUsHIlrkK1I6ADno5MfT10UjhR"},430:function(e,t,i){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(e,t){if("object"!==n(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!==n(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function s(e){var t=a(e,"string");return"symbol"===n(t)?t:String(t)}function o(e,t,i){return t=s(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,{Z:function(){return u}});const r="{{formUrl}}",l="http://localhost:8082",d="/api/tokenizer";class u{constructor(e){if(o(this,"id",void 0),o(this,"apikey",void 0),o(this,"url",void 0),o(this,"amount",void 0),o(this,"iframe",void 0),o(this,"container",null),o(this,"settings",{id:"",apikey:"",amount:""}),o(this,"onLoad",(()=>{})),o(this,"validCard",(()=>{})),o(this,"achOnChange",(()=>{})),o(this,"magStripeSwipe",(()=>{})),o(this,"onPaymentChange",(()=>{})),o(this,"submission",(()=>{})),!e.apikey)throw new Error("apikey must be set!");this.apikey=e.apikey,this.url=e.url&&""!==e.url?e.url:r,e.url||-1===window.location.href.indexOf("localhost")?this.url=this.url.replace(/\/$/,"")+d:this.url=l.replace(/\/$/,"")+d,this.url+="/"+this.apikey,e.amount&&(this.amount=e.amount),this.id=this.uuid(),"object"===typeof e.settings&&(this.settings=e.settings),e.onLoad&&(this.onLoad=e.onLoad),e.validCard&&(this.validCard=e.validCard),e.achOnChange&&(this.achOnChange=e.achOnChange),e.magStripeSwipe&&(this.magStripeSwipe=e.magStripeSwipe),e.onPaymentChange&&(this.onPaymentChange=e.onPaymentChange),e.submission&&(this.submission=e.submission),window.addEventListener("message",(e=>{this.messageListener(e)})),this.iframe=this.buildIframe(),this.waitForContainer(e.container,(e=>{if(!e)throw new Error("Could not find container");this.iframe.onload=()=>{this.settings.id=this.id,this.settings.apikey=this.apikey,this.settings.amount=this.amount,this.setSettings(this.settings),this.onLoad()},this.container=e,this.container.appendChild(this.iframe)}))}create(){}isSurchargeable(e,t){const i=["CO","CT","ME","MA"];return""!==e&&(-1===i.indexOf(e.toUpperCase())&&!(!t||!t.card_type||"credit"!==t.card_type.toLowerCase()))}submit(e){this.getGuardianData().then((e=>{e.events?.length&&this.postMessage({event:"setGuardian",data:e})})).then((()=>{this.postMessage({event:"submit",data:{amount:e}})})).catch((()=>{this.postMessage({event:"submit",data:{amount:e}})}))}setExpDate(e){this.postMessage({event:"setExpDate",data:{value:e}})}postMessage(e){const t=this.iframe.contentWindow;if(null!==t){const i=JSON.stringify(e);t.postMessage(i,"*")}}uuid(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}waitForContainer(e,t){if(!e)return void t(null);const i=Date.now(),n=1e3,a=1e4;(function s(){"string"!==typeof e||null===document.querySelector(e)?"string"!==typeof e&&e?t(e):setTimeout((()=>{a&&Date.now()-i>a?t(null):s()}),n):t(document.querySelector(e))})()}buildIframe(){const e=document.createElement("iframe");return e.src=this.url,e.setAttribute("allow","payment"),e.style.display="block",e.style.border="none",e.style.margin="0px",e.style.padding="0px",e.style.width="1px",e.style.minWidth="100%",e.style.height="30px",e.style.overflow="hidden",e.style.backgroundColor="transparent",e.style.transition="all .3s ease-out",e.frameBorder="0",e}setSettings(e){this.postMessage({event:"setSettings",data:e})}updateHeight(e){e&&(this.iframe.style.height=e+"px")}getGuardianData(){const e=window.Guardian;return e&&e.getData&&"function"===typeof e.getData?e.getData():Promise.reject()}messageListener(e){try{const t=JSON.parse(e.data),i=t.id;if(this.id!==i)return;const n=t.event,a=t.data;if(!n)return;switch(n){case"submission":this.submission(a);break;case"validCard":this.validCard(a);break;case"achOnChange":this.achOnChange(a);break;case"magStripeSwipe":this.magStripeSwipe(a);break;case"onPaymentChange":this.onPaymentChange(a.type);break;case"setHeight":this.updateHeight(a.height);break}}catch(e){}}}},561:function(e,t,i){i.r(t),i.d(t,{default:function(){return L}});var n=i(252),a=i(577);const s={class:"main methods"},o=(0,n._)("pre",null,[(0,n.Uk)("      "),(0,n._)("code",{class:"language-javascript"},"\n        // Example Code\n        var example = new Tokenizer({\n          url: '', // Optional - Only pass if using a different domain than your on\n          apikey: 'key here',\n          container: document.querySelector('#div container'),\n\n          // Callback to identify when iframe has been loaded\n          onLoad: () => {\n            console.log('iframe loaded')\n          },\n\n          // Callback to identify when a valid cc has been inputed\n          validCard: (card: object) => {\n            console.log(card)\n            // card.isValid // Boolean\n            // card.bin // Object of bin data\n\n            // If you need to check if surchargable\n            // Pass state and card bin data\n            var isSurchargable = example.isSurchargeable(state, card.bin)\n            console.log(isSurchargable)\n          },\n\n          achOnChange: (data: any) => { console.log(data) },\n          \n          magStripeSwipe: (data: any) => { console.log(data) },\n\n          // Callback after payment was submitted\n          submission: (resp) => {\n            console.log(resp)\n          }\n        })\n\n        // Set expiration date on card payment\n        example.setExpDate('09/12')\n\n        // Submit payment\n        example.submit()\n      "),(0,n.Uk)("\n    ")],-1),r={class:"section example"},l=(0,n._)("div",{class:"example-method"},null,-1),d=(0,n._)("div",{class:"callback-title"}," Callbacks ",-1),u={class:"items"},h={class:"item"},c=(0,n._)("div",{class:"title"}," onLoad ",-1),m={class:"item"},p=(0,n._)("div",{class:"title"}," validCard ",-1),g={class:"item"},y=(0,n._)("div",{class:"title"}," achOnChange ",-1),b={class:"item"},f=(0,n._)("div",{class:"title"}," magStripeSwipe ",-1),v={class:"item"},w=(0,n._)("div",{class:"title"}," submission ",-1);function S(e,t,i,S,C,k){return(0,n.wg)(),(0,n.iD)("div",s,[o,(0,n._)("div",r,[l,(0,n._)("button",{onClick:t[0]||(t[0]=t=>e.submit())}," Pay "),d,(0,n._)("div",u,[(0,n._)("div",h,[c,(0,n._)("pre",null,(0,a.zw)(e.onLoad),1)]),(0,n._)("div",m,[p,(0,n._)("pre",null,(0,a.zw)(e.validCard),1)]),(0,n._)("div",g,[y,(0,n._)("pre",null,(0,a.zw)(e.achOnChange),1)]),(0,n._)("div",b,[f,(0,n._)("pre",null,(0,a.zw)(e.magStripeSwipe),1)]),(0,n._)("div",v,[w,(0,n._)("pre",null,(0,a.zw)(e.submission),1)])])])])}var C=i(430),k=i(507),_=(0,n.aZ)({name:"Methods",data(){return{example:null,onLoad:!1,validCard:null,achOnChange:null,magStripeSwipe:null,submission:null}},mounted(){this.example=new C.Z({apikey:k.K,container:document.querySelector(".methods .example-method"),onLoad:()=>{this.onLoad=!0},validCard:e=>{this.validCard=e},achOnChange:e=>{this.achOnChange=e},magStripeSwipe:e=>{this.magStripeSwipe=e},submission:e=>{this.submission=e},settings:{user:{showInline:!0,showName:!0,showTitle:!0},payment:{showTitle:!0,types:["card","ach"]}}}),this.example.setExpDate("09/12"),this.example.submit()},methods:{submit(){this.example&&this.example.submit()}}}),x=i(744);const O=(0,x.Z)(_,[["render",S]]);var L=O}}]);
//# sourceMappingURL=561.96d4ea10.js.map