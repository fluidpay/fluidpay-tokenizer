"use strict";(self["webpackChunkfluidpay_tokenizer"]=self["webpackChunkfluidpay_tokenizer"]||[]).push([[891],{507:function(t,e,n){n.d(e,{K:function(){return s}});const s="pub_0wUsHIlrkK1I6ADno5MfT10UjhR"},430:function(t,e,n){function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function i(t,e){if("object"!==s(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function a(t){var e=i(t,"string");return"symbol"===s(e)?e:String(e)}function o(t,e,n){return e=a(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,{Z:function(){return h}});const r="{{formUrl}}",u="http://localhost:8082",l="/api/tokenizer";class h{constructor(t){if(o(this,"id",void 0),o(this,"apikey",void 0),o(this,"url",void 0),o(this,"amount",void 0),o(this,"iframe",void 0),o(this,"container",null),o(this,"settings",{id:"",apikey:"",amount:""}),o(this,"onLoad",(()=>{})),o(this,"validCard",(()=>{})),o(this,"achOnChange",(()=>{})),o(this,"magStripeSwipe",(()=>{})),o(this,"onPaymentChange",(()=>{})),o(this,"submission",(()=>{})),o(this,"errorPass",(()=>{})),!t.apikey)throw new Error("apikey must be set!");this.apikey=t.apikey,this.url=t.url&&""!==t.url?t.url:r,t.url||-1===window.location.href.indexOf("localhost")?this.url=this.url.replace(/\/$/,"")+l:this.url=u.replace(/\/$/,"")+l,this.url+="/"+this.apikey,t.amount&&(this.amount=t.amount),this.id=this.uuid(),"object"===typeof t.settings&&(this.settings=t.settings),t.onLoad&&(this.onLoad=t.onLoad),t.validCard&&(this.validCard=t.validCard),t.achOnChange&&(this.achOnChange=t.achOnChange),t.magStripeSwipe&&(this.magStripeSwipe=t.magStripeSwipe),t.onPaymentChange&&(this.onPaymentChange=t.onPaymentChange),t.submission&&(this.submission=t.submission),window.addEventListener("message",(t=>{this.messageListener(t)})),this.iframe=this.buildIframe(),this.waitForContainer(t.container,(t=>{if(!t)throw new Error("Could not find container");this.iframe.onload=()=>{this.settings.id=this.id,this.settings.apikey=this.apikey,this.settings.amount=this.amount,this.setSettings(this.settings),this.onLoad()},this.container=t,this.container.appendChild(this.iframe)}))}create(){}isSurchargeable(t,e){const n=["CO","CT","ME","MA"];return""!==t&&(-1===n.indexOf(t.toUpperCase())&&!(!e||!e.card_type||"credit"!==e.card_type.toLowerCase()))}submit(t){this.getGuardianData().then((t=>{t.events?.length&&this.postMessage({event:"setGuardian",data:t})})).then((()=>{this.postMessage({event:"submit",data:{amount:t}})})).catch((()=>{this.postMessage({event:"submit",data:{amount:t}})}))}setExpDate(t){this.postMessage({event:"setExpDate",data:{value:t}})}setError(t){this.postMessage({event:"setError",data:{input:t}})}postMessage(t){const e=this.iframe.contentWindow;if(null!==e){const n=JSON.stringify(t);e.postMessage(n,"*")}}uuid(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}waitForContainer(t,e){if(!t)return void e(null);const n=Date.now(),s=1e3,i=1e4;(function a(){"string"!==typeof t||null===document.querySelector(t)?"string"!==typeof t&&t?e(t):setTimeout((()=>{i&&Date.now()-n>i?e(null):a()}),s):e(document.querySelector(t))})()}buildIframe(){const t=document.createElement("iframe");return t.src=this.url,t.setAttribute("allow","payment"),t.style.display="block",t.style.border="none",t.style.margin="0px",t.style.padding="0px",t.style.width="1px",t.style.minWidth="100%",t.style.height="30px",t.style.overflow="hidden",t.style.backgroundColor="transparent",t.style.transition="all .3s ease-out",t.frameBorder="0",t}setSettings(t){this.postMessage({event:"setSettings",data:t})}updateHeight(t){t&&(this.iframe.style.height=t+"px")}getGuardianData(){const t=window.Guardian;return t&&t.getData&&"function"===typeof t.getData?t.getData():Promise.reject()}messageListener(t){try{const e=JSON.parse(t.data),n=e.id;if(this.id!==n)return;const s=e.event,i=e.data;if(!s)return;switch(s){case"submission":this.submission(i);break;case"validCard":this.validCard(i);break;case"achOnChange":this.achOnChange(i);break;case"magStripeSwipe":this.magStripeSwipe(i);break;case"onPaymentChange":this.onPaymentChange(i.type);break;case"setHeight":this.updateHeight(i.height);break}}catch(t){}}}},891:function(t,e,n){n.r(e),n.d(e,{default:function(){return b}});var s=n(252),i=n(963),a=n(577);const o={class:"threeds"},r=(0,s._)("pre",null,[(0,s.Uk)("      "),(0,s._)("code",{class:"language-javascript"},'\n        // Tokenizer\n        var tokenizer = new Tokenizer({\n          // url: Optional - used only when the domain does not match\n          apikey: "api_12345",\n          settings: {\n            paay: {\n              sandbox: false,       // Set to true for testing purposes.\n              forceDisabled: false, // Force not running paay\n              rejectChallenges: []  // Statuses to reject from submission\n                                    // https://docs.3dsintegrator.com/docs/3ds-response-table-of-content\n            }\n          },\n          container: document.querySelector(".tokenizer-container"),\n          submission: (response) => {\n            // set the response\n            state.response = response\n          }\n        })\n\n        // Submit\n        var submit = function() {\n          // submit off to the tokenizer with the dollar amount\n          tokenizer.submit("1.00")\n        }\n      '),(0,s.Uk)("\n    ")],-1),u={class:"playground example"},l={class:"line-item"},h=(0,s._)("label",{class:"label"},"Amount",-1),d={ref:"example",class:"payment"};function c(t,e,n,c,m,p){return(0,s.wg)(),(0,s.iD)("div",o,[r,(0,s._)("div",u,[(0,s._)("div",l,[h,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.amount=e),class:"input",type:"text"},null,512),[[i.nr,t.amount]])]),(0,s._)("div",d,null,512),(0,s._)("button",{id:"submit",type:"button",class:"button",onClick:e[1]||(e[1]=e=>t.submit(t.amount))}," Checkout "),(0,s._)("pre",null,(0,a.zw)(t.response),1)])])}var m=n(430),p=n(507),g=(0,s.aZ)({name:"Threeds",data(){return{example:{},amount:"1.00",response:null}},mounted(){this.example=new m.Z({apikey:p.K,container:this.$refs.example,settings:{paay:{sandbox:!0}},submission:t=>{const e=document.getElementById("submit");e.disabled=!1,this.response=t}})},methods:{submit(t){const e=document.getElementById("submit");e.disabled=!0,this.example.submit(t)}}}),f=n(744);const y=(0,f.Z)(g,[["render",c]]);var b=y}}]);
//# sourceMappingURL=891.de13f7eb.js.map